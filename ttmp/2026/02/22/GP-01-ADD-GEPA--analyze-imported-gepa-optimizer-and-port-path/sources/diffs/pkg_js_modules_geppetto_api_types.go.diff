--- /home/manuel/workspaces/2026-02-22/add-gepa-optimizer/geppetto/pkg/js/modules/geppetto/api_types.go	2026-02-22 17:02:05.264595514 -0500
+++ /home/manuel/workspaces/2026-02-22/add-gepa-optimizer/imported/geppetto-main/pkg/js/modules/geppetto/api_types.go	2026-02-22 16:34:26.000000000 -0500
@@ -7,10 +7,12 @@
 	"sync"
 
 	"github.com/dop251/goja"
+	"github.com/go-go-golems/geppetto/pkg/events"
 	"github.com/go-go-golems/geppetto/pkg/inference/engine"
 	"github.com/go-go-golems/geppetto/pkg/inference/middleware"
 	"github.com/go-go-golems/geppetto/pkg/inference/session"
 	"github.com/go-go-golems/geppetto/pkg/inference/toolloop"
+	"github.com/go-go-golems/geppetto/pkg/inference/toolloop/enginebuilder"
 	"github.com/go-go-golems/geppetto/pkg/inference/tools"
 	"github.com/go-go-golems/geppetto/pkg/turns"
 )
@@ -31,6 +33,9 @@
 	toolCfg      *tools.ToolConfig
 	toolExecutor tools.ToolExecutor
 	toolHooks    *jsToolHooks
+	eventSinks   []events.EventSink
+	snapshotHook toolloop.SnapshotHook
+	persister    enginebuilder.TurnPersister
 }
 
 type sessionRef struct {
